FROM python:3.10-slim

WORKDIR /app

COPY requirements_ui.txt .
RUN pip install --no-cache-dir -r requirements_ui.txt

COPY scripts/app.py scripts/
# No .env copy - we want to be "Cloud Native"

# Force Streamlit to be quiet and listen
ENV PORT=8080
ENV STREAMLIT_SERVER_PORT=8080
ENV STREAMLIT_SERVER_ADDRESS=0.0.0.0

EXPOSE 8080

# Using JSON syntax for CMD is more reliable in Docker
CMD ["streamlit", "run", "scripts/app.py", "--server.port=8080", "--server.address=0.0.0.0", "--server.headless=true", "--server.enableCORS=false", "--server.enableXsrfProtection=false"]
